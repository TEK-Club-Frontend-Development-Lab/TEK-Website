{% extends 'base.html' %}
{% load static %}
<!DOCTYPE html>


{% block extra-head %}
<link rel="stylesheet" href="{% static 'apply.css' %}?{% now "U" %}">
<style>
    /* Hide the carousel */
    .carousel-inner {
    display: none !important;
    }
</style>
{% endblock %}

{% block otherpages %}
    <!--<body>-->

        <div class = "coverpic">
            <img src = "{% static 'img/contact3.jpeg' %}">
            <a href="#">Apply</a>
        </div>
        
        <div class="container">

            <header class="about">
                <a href="#">TEK Club Application</a>
            </header>

            <form class="application-form" action="{% url 'joinus:submit' %}" method="post">
                {% csrf_token %}
            
                {% if not request.user.is_authenticated %}
                  <p style="color:#b00000; margin-bottom:12px;">
                    Only members can submit. Please
                    <a href="{% url 'account:signin' %}?next={{ request.path }}">sign in</a>.
                  </p>
                  <fieldset disabled>
                {% endif %}
            
        
                <label for="labpreference">
                    What lab would you like to join?
                    <p style="color: rgb(198, 198, 198);font-size: 12px;margin-bottom: 5px;">This is a preliminary survey, and the official recruitment of lab members will take place later.</p>
                </label>
                <select id="labpreference" name="labpreference">
                    <option value="nopreference">No Preference</option>
                    <option value="frontenddevelopment">Frontend Development</option>
                    <option value="datavisualization">Data Visualization</option>
                    <option value="dataengineering">Data Engineering</option>
                    <option value="excel">Excel</option>
                </select>
        
                <label for="motivation">Why do you want to join?</label>
                <textarea id="motivation" name="motivation" rows="4" cols="50" placeholder="Write your motivation here."></textarea>
        
        
                <input type="submit" value="Apply">
                {% if not request.user.is_authenticated %}
                    </fieldset>
                {% endif %}

                {% if messages %}
                <div id="flash-messages" style="position:relative;margin:10px 0;padding:5px 5px;background:transparent;z-index:9999;">
                    {% for message in messages %}
                    <div class="flash-item {{ message.tags }}" style="margin:6px 0;display:flex;justify-content:space-between;gap:12px;">
                        <span>{{ message }}</span>
                        <button type="button" class="flash-close" aria-label="Close" style="border:none;background:transparent;font-size:18px;cursor:pointer;">Ã—</button>
                    </div>
                    {% endfor %}
                </div>
                <script>
                    (function(){
                    const box = document.getElementById('flash-messages');
                    if (!box) return;
                    box.addEventListener('click', e => {
                        if (e.target.classList.contains('flash-close')) {
                        const item = e.target.closest('.flash-item');
                        if (item) item.remove();
                        if (!box.querySelector('.flash-item')) box.remove();
                        }
                    });
                    setTimeout(() => {
                        box.style.transition = 'opacity .4s ease';
                        box.style.opacity = '0';
                        setTimeout(() => box.remove(), 400);
                    }, 3500);
                    })();
                </script>
                {% endif %}

            </form>

        </div>
    <!--</body>-->
</html>

{% endblock %}